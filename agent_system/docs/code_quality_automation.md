# Automated Code Quality for Agent PRs

This document describes the automated code quality process integrated with the agent system.

## Overview

The system ensures all code generated by agents meets quality standards before being submitted as pull requests. This is accomplished through:

1. **Pre-PR Quality Checks**: Validates code before PR submission
2. **Automatic Fixes**: Attempts to fix common issues automatically 
3. **GitHub Actions Integration**: Re-runs checks on PR submission
4. **Quality Reports**: Provides detailed reports of issues

## Components

The system consists of the following components:

### 1. Code Quality Validator (`validate_code_quality.py`)

This script performs various code quality checks:
- Syntax errors
- Import errors
- Line length issues
- TODO comments
- Print statement usage
- And more

Usage:
```bash
# Check all code with detailed output
python agent_system/validate_code_quality.py --all --detailed

# Check a specific task
python agent_system/validate_code_quality.py --task TASK_ID
```

### 2. Auto-Fix Tool (`code_quality_autofix.py`)

This utility attempts to fix common code quality issues:
- Import errors
- Line length issues
- Replace print statements with logging
- Add missing __init__.py files

Usage:
```bash
# Fix issues in the current directory
python agent_system/code_quality_autofix.py

# Fix issues in a specific directory
python agent_system/code_quality_autofix.py --directory app/models
```

### 3. PR Workflow Integration (`pr_workflow.py`)

A pre-commit hook that runs quality checks before allowing PR creation.

### 4. Task Integration (`tasks.py`)

Integrates with the agent task system to validate code before PR submission.

### 5. GitHub Actions Integration (`code-quality-check.yml`)

Automatically runs quality checks on PRs and reports issues.

## Workflow

1. Agent completes a task and prepares code changes
2. Before PR submission, quality checks are run automatically
3. If issues are found:
   - The auto-fix tool attempts to fix common issues
   - If serious issues remain, the agent is notified to fix them
4. Once quality checks pass, the PR can be submitted
5. GitHub Actions runs another quality check when the PR is created
6. If issues are found at this stage, a comment is added to the PR

## Severity Levels

Issues are categorized by severity:

- **Error**: Critical issues that must be fixed (e.g., syntax errors)
- **Warning**: Issues that should be addressed but don't break functionality
- **Info**: Suggestions for improvement (e.g., TODO comments)

## Extending the System

To add new quality checks:

1. Modify `validate_python_file()` or `validate_javascript_file()` in `validate_code_quality.py`
2. Add corresponding automatic fixes to `code_quality_autofix.py` 